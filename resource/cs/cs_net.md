### 计算机网络为什么这么设计？
https://book.systemsapproach.org/index.html

### 计算机网络？
![net](https://arch-long.cn/assets/tcp_ip.png)

### 数据链路层

### 网络层

### 传输层

### 应用层

### 为什么要子网划分？
从现在的角度看来，当时的IP地址设计的不够合理。  
1. IP地址空间的利用率有时很低。  
比如一个B类地址网络，可以连接的主机数量超6万。但是有的单位申请到B类的地址，主机数没那么多。但也不愿意申请一个C类（为了以后的发展）。  
2. 给每个物理网络分配一个网络号，会使路由表变得很大，使网络性能变坏。 
3. 两级IP不够灵活
比如，一个单位要新开一个网络，在申请到IP之前，是没办法联网工作的。  

为了解决以上问题，1985年起在IP地址中增加了一个```子网号字段```，使两级IP变成三级IP，这种做法叫做```划分子网```（subnetting）

### 如何划分子网？
划分子网纯属一个单位内部的事情，本单位以外的网络看不见这个网络是由多少个子网组成。  

方法：从网络的主机号借用若干位，作为子网号。  
IP地址 = 网络号 + 子网号 + 主机号  
![subnetting](https://upload.wikimedia.org/wikipedia/commons/1/14/Subnetting_Concept-en.svg)  

从其他网络发给本单位某台主机的IP数据报，仍然是根据IP数据报的目的网络号找到本单位网络上的路由器。 路由器收到IP数据报之后，再按目的网络号和子网号找到目的子网，把IP数据报交付目的主机。

从IP数据报首部我们无法看出源主机或者目的主机所连接的网络是否进行了子网划分。因为IP地址或者数据报的首部并没有包含任何子网划分的信息。所以，我们就需要子网掩码。  

使用子网掩码的好处就是：不管网络有没有划分子网，只要把子网掩码和IP地址进行AND运算，就立即得出网络地址来。

因为子网号是借用主机号的，所以
1. 使用较少位数的子网号，子网划分的就少，但是每个子网可连接的主机数就多。
2. 使用较多位数的子网号，子网划分的就多，但是每个子网可连接的主机数就少。
所以，根据具体情况选择合适的子网掩码。

划分子网增加了灵活性，但却减少了能够连接在网络上的主机总数。（子网数 * 主机数 < 原主机数）

### 无分类编址（CIDR）
2011年2月3日，IANA宣布，IPv4已经耗尽。

### TCP vs UDP?

### QUIC?

### 多路复用？

